{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CountOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n\nconst command_1 = require(\"./command\");\n/** @internal */\n\n\nclass CountOperation extends command_1.CommandOperation {\n  constructor(namespace, filter, options) {\n    super({\n      s: {\n        namespace: namespace\n      }\n    }, options);\n    this.options = options;\n    this.collectionName = namespace.collection;\n    this.query = filter;\n  }\n\n  execute(server, session, callback) {\n    const options = this.options;\n    const cmd = {\n      count: this.collectionName,\n      query: this.query\n    };\n\n    if (typeof options.limit === 'number') {\n      cmd.limit = options.limit;\n    }\n\n    if (typeof options.skip === 'number') {\n      cmd.skip = options.skip;\n    }\n\n    if (options.hint != null) {\n      cmd.hint = options.hint;\n    }\n\n    if (typeof options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = options.maxTimeMS;\n    }\n\n    super.executeCommand(server, session, cmd, (err, result) => {\n      callback(err, result ? result.n : 0);\n    });\n  }\n\n}\n\nexports.CountOperation = CountOperation;\noperation_1.defineAspects(CountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE]);","map":{"version":3,"names":["Object","defineProperty","exports","value","CountOperation","operation_1","require","command_1","CommandOperation","constructor","namespace","filter","options","s","collectionName","collection","query","execute","server","session","callback","cmd","count","limit","skip","hint","maxTimeMS","executeCommand","err","result","n","defineAspects","Aspect","READ_OPERATION","RETRYABLE"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/operations/count.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CountOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst command_1 = require(\"./command\");\n/** @internal */\nclass CountOperation extends command_1.CommandOperation {\n    constructor(namespace, filter, options) {\n        super({ s: { namespace: namespace } }, options);\n        this.options = options;\n        this.collectionName = namespace.collection;\n        this.query = filter;\n    }\n    execute(server, session, callback) {\n        const options = this.options;\n        const cmd = {\n            count: this.collectionName,\n            query: this.query\n        };\n        if (typeof options.limit === 'number') {\n            cmd.limit = options.limit;\n        }\n        if (typeof options.skip === 'number') {\n            cmd.skip = options.skip;\n        }\n        if (options.hint != null) {\n            cmd.hint = options.hint;\n        }\n        if (typeof options.maxTimeMS === 'number') {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        super.executeCommand(server, session, cmd, (err, result) => {\n            callback(err, result ? result.n : 0);\n        });\n    }\n}\nexports.CountOperation = CountOperation;\noperation_1.defineAspects(CountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE]);\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyB,KAAK,CAA9B;;AACA,MAAMC,WAAW,GAAGC,OAAO,CAAC,aAAD,CAA3B;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;AACA;;;AACA,MAAMF,cAAN,SAA6BG,SAAS,CAACC,gBAAvC,CAAwD;EACpDC,WAAW,CAACC,SAAD,EAAYC,MAAZ,EAAoBC,OAApB,EAA6B;IACpC,MAAM;MAAEC,CAAC,EAAE;QAAEH,SAAS,EAAEA;MAAb;IAAL,CAAN,EAAuCE,OAAvC;IACA,KAAKA,OAAL,GAAeA,OAAf;IACA,KAAKE,cAAL,GAAsBJ,SAAS,CAACK,UAAhC;IACA,KAAKC,KAAL,GAAaL,MAAb;EACH;;EACDM,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,EAA4B;IAC/B,MAAMR,OAAO,GAAG,KAAKA,OAArB;IACA,MAAMS,GAAG,GAAG;MACRC,KAAK,EAAE,KAAKR,cADJ;MAERE,KAAK,EAAE,KAAKA;IAFJ,CAAZ;;IAIA,IAAI,OAAOJ,OAAO,CAACW,KAAf,KAAyB,QAA7B,EAAuC;MACnCF,GAAG,CAACE,KAAJ,GAAYX,OAAO,CAACW,KAApB;IACH;;IACD,IAAI,OAAOX,OAAO,CAACY,IAAf,KAAwB,QAA5B,EAAsC;MAClCH,GAAG,CAACG,IAAJ,GAAWZ,OAAO,CAACY,IAAnB;IACH;;IACD,IAAIZ,OAAO,CAACa,IAAR,IAAgB,IAApB,EAA0B;MACtBJ,GAAG,CAACI,IAAJ,GAAWb,OAAO,CAACa,IAAnB;IACH;;IACD,IAAI,OAAOb,OAAO,CAACc,SAAf,KAA6B,QAAjC,EAA2C;MACvCL,GAAG,CAACK,SAAJ,GAAgBd,OAAO,CAACc,SAAxB;IACH;;IACD,MAAMC,cAAN,CAAqBT,MAArB,EAA6BC,OAA7B,EAAsCE,GAAtC,EAA2C,CAACO,GAAD,EAAMC,MAAN,KAAiB;MACxDT,QAAQ,CAACQ,GAAD,EAAMC,MAAM,GAAGA,MAAM,CAACC,CAAV,GAAc,CAA1B,CAAR;IACH,CAFD;EAGH;;AA5BmD;;AA8BxD5B,OAAO,CAACE,cAAR,GAAyBA,cAAzB;AACAC,WAAW,CAAC0B,aAAZ,CAA0B3B,cAA1B,EAA0C,CAACC,WAAW,CAAC2B,MAAZ,CAAmBC,cAApB,EAAoC5B,WAAW,CAAC2B,MAAZ,CAAmBE,SAAvD,CAA1C"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\n\nconst command_1 = require(\"./command\");\n\nconst utils_1 = require(\"../utils\");\n\nconst error_1 = require(\"../error\");\n\nconst levelValues = new Set(['off', 'slow_only', 'all']);\n/** @public */\n\nexports.ProfilingLevel = Object.freeze({\n  off: 'off',\n  slowOnly: 'slow_only',\n  all: 'all'\n});\n/** @internal */\n\nclass SetProfilingLevelOperation extends command_1.CommandOperation {\n  constructor(db, level, options) {\n    super(db, options);\n    this.options = options;\n\n    switch (level) {\n      case exports.ProfilingLevel.off:\n        this.profile = 0;\n        break;\n\n      case exports.ProfilingLevel.slowOnly:\n        this.profile = 1;\n        break;\n\n      case exports.ProfilingLevel.all:\n        this.profile = 2;\n        break;\n\n      default:\n        this.profile = 0;\n        break;\n    }\n\n    this.level = level;\n  }\n\n  execute(server, session, callback) {\n    const level = this.level;\n\n    if (!levelValues.has(level)) {\n      return callback(new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${utils_1.enumToString(exports.ProfilingLevel)}\"`));\n    } // TODO(NODE-3483): Determine error to put here\n\n\n    super.executeCommand(server, session, {\n      profile: this.profile\n    }, (err, doc) => {\n      if (err == null && doc.ok === 1) return callback(undefined, level);\n      return err != null ? callback(err) : callback(new error_1.MongoRuntimeError('Error with profile command'));\n    });\n  }\n\n}\n\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation;","map":{"version":3,"names":["Object","defineProperty","exports","value","SetProfilingLevelOperation","ProfilingLevel","command_1","require","utils_1","error_1","levelValues","Set","freeze","off","slowOnly","all","CommandOperation","constructor","db","level","options","profile","execute","server","session","callback","has","MongoInvalidArgumentError","enumToString","executeCommand","err","doc","ok","undefined","MongoRuntimeError"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/operations/set_profiling_level.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\nconst command_1 = require(\"./command\");\nconst utils_1 = require(\"../utils\");\nconst error_1 = require(\"../error\");\nconst levelValues = new Set(['off', 'slow_only', 'all']);\n/** @public */\nexports.ProfilingLevel = Object.freeze({\n    off: 'off',\n    slowOnly: 'slow_only',\n    all: 'all'\n});\n/** @internal */\nclass SetProfilingLevelOperation extends command_1.CommandOperation {\n    constructor(db, level, options) {\n        super(db, options);\n        this.options = options;\n        switch (level) {\n            case exports.ProfilingLevel.off:\n                this.profile = 0;\n                break;\n            case exports.ProfilingLevel.slowOnly:\n                this.profile = 1;\n                break;\n            case exports.ProfilingLevel.all:\n                this.profile = 2;\n                break;\n            default:\n                this.profile = 0;\n                break;\n        }\n        this.level = level;\n    }\n    execute(server, session, callback) {\n        const level = this.level;\n        if (!levelValues.has(level)) {\n            return callback(new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${utils_1.enumToString(exports.ProfilingLevel)}\"`));\n        }\n        // TODO(NODE-3483): Determine error to put here\n        super.executeCommand(server, session, { profile: this.profile }, (err, doc) => {\n            if (err == null && doc.ok === 1)\n                return callback(undefined, level);\n            return err != null\n                ? callback(err)\n                : callback(new error_1.MongoRuntimeError('Error with profile command'));\n        });\n    }\n}\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,0BAAR,GAAqCF,OAAO,CAACG,cAAR,GAAyB,KAAK,CAAnE;;AACA,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAMG,WAAW,GAAG,IAAIC,GAAJ,CAAQ,CAAC,KAAD,EAAQ,WAAR,EAAqB,KAArB,CAAR,CAApB;AACA;;AACAT,OAAO,CAACG,cAAR,GAAyBL,MAAM,CAACY,MAAP,CAAc;EACnCC,GAAG,EAAE,KAD8B;EAEnCC,QAAQ,EAAE,WAFyB;EAGnCC,GAAG,EAAE;AAH8B,CAAd,CAAzB;AAKA;;AACA,MAAMX,0BAAN,SAAyCE,SAAS,CAACU,gBAAnD,CAAoE;EAChEC,WAAW,CAACC,EAAD,EAAKC,KAAL,EAAYC,OAAZ,EAAqB;IAC5B,MAAMF,EAAN,EAAUE,OAAV;IACA,KAAKA,OAAL,GAAeA,OAAf;;IACA,QAAQD,KAAR;MACI,KAAKjB,OAAO,CAACG,cAAR,CAAuBQ,GAA5B;QACI,KAAKQ,OAAL,GAAe,CAAf;QACA;;MACJ,KAAKnB,OAAO,CAACG,cAAR,CAAuBS,QAA5B;QACI,KAAKO,OAAL,GAAe,CAAf;QACA;;MACJ,KAAKnB,OAAO,CAACG,cAAR,CAAuBU,GAA5B;QACI,KAAKM,OAAL,GAAe,CAAf;QACA;;MACJ;QACI,KAAKA,OAAL,GAAe,CAAf;QACA;IAZR;;IAcA,KAAKF,KAAL,GAAaA,KAAb;EACH;;EACDG,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,EAA4B;IAC/B,MAAMN,KAAK,GAAG,KAAKA,KAAnB;;IACA,IAAI,CAACT,WAAW,CAACgB,GAAZ,CAAgBP,KAAhB,CAAL,EAA6B;MACzB,OAAOM,QAAQ,CAAC,IAAIhB,OAAO,CAACkB,yBAAZ,CAAuC,mCAAkCnB,OAAO,CAACoB,YAAR,CAAqB1B,OAAO,CAACG,cAA7B,CAA6C,GAAtH,CAAD,CAAf;IACH,CAJ8B,CAK/B;;;IACA,MAAMwB,cAAN,CAAqBN,MAArB,EAA6BC,OAA7B,EAAsC;MAAEH,OAAO,EAAE,KAAKA;IAAhB,CAAtC,EAAiE,CAACS,GAAD,EAAMC,GAAN,KAAc;MAC3E,IAAID,GAAG,IAAI,IAAP,IAAeC,GAAG,CAACC,EAAJ,KAAW,CAA9B,EACI,OAAOP,QAAQ,CAACQ,SAAD,EAAYd,KAAZ,CAAf;MACJ,OAAOW,GAAG,IAAI,IAAP,GACDL,QAAQ,CAACK,GAAD,CADP,GAEDL,QAAQ,CAAC,IAAIhB,OAAO,CAACyB,iBAAZ,CAA8B,4BAA9B,CAAD,CAFd;IAGH,CAND;EAOH;;AAjC+D;;AAmCpEhC,OAAO,CAACE,0BAAR,GAAqCA,0BAArC"},"metadata":{},"sourceType":"script"}
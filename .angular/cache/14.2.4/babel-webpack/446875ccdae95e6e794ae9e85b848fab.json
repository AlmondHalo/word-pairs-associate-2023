{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CreateCollectionOperation = void 0;\n\nconst command_1 = require(\"./command\");\n\nconst operation_1 = require(\"./operation\");\n\nconst collection_1 = require(\"../collection\");\n\nconst ILLEGAL_COMMAND_FIELDS = new Set(['w', 'wtimeout', 'j', 'fsync', 'autoIndexId', 'pkFactory', 'raw', 'readPreference', 'session', 'readConcern', 'writeConcern', 'raw', 'fieldsAsRaw', 'promoteLongs', 'promoteValues', 'promoteBuffers', 'bsonRegExp', 'serializeFunctions', 'ignoreUndefined']);\n/** @internal */\n\nclass CreateCollectionOperation extends command_1.CommandOperation {\n  constructor(db, name, options = {}) {\n    super(db, options);\n    this.options = options;\n    this.db = db;\n    this.name = name;\n  }\n\n  execute(server, session, callback) {\n    const db = this.db;\n    const name = this.name;\n    const options = this.options;\n\n    const done = err => {\n      if (err) {\n        return callback(err);\n      }\n\n      callback(undefined, new collection_1.Collection(db, name, options));\n    };\n\n    const cmd = {\n      create: name\n    };\n\n    for (const n in options) {\n      if (options[n] != null && typeof options[n] !== 'function' && !ILLEGAL_COMMAND_FIELDS.has(n)) {\n        cmd[n] = options[n];\n      }\n    } // otherwise just execute the command\n\n\n    super.executeCommand(server, session, cmd, done);\n  }\n\n}\n\nexports.CreateCollectionOperation = CreateCollectionOperation;\noperation_1.defineAspects(CreateCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"names":["Object","defineProperty","exports","value","CreateCollectionOperation","command_1","require","operation_1","collection_1","ILLEGAL_COMMAND_FIELDS","Set","CommandOperation","constructor","db","name","options","execute","server","session","callback","done","err","undefined","Collection","cmd","create","n","has","executeCommand","defineAspects","Aspect","WRITE_OPERATION"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/operations/create_collection.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreateCollectionOperation = void 0;\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\nconst collection_1 = require(\"../collection\");\nconst ILLEGAL_COMMAND_FIELDS = new Set([\n    'w',\n    'wtimeout',\n    'j',\n    'fsync',\n    'autoIndexId',\n    'pkFactory',\n    'raw',\n    'readPreference',\n    'session',\n    'readConcern',\n    'writeConcern',\n    'raw',\n    'fieldsAsRaw',\n    'promoteLongs',\n    'promoteValues',\n    'promoteBuffers',\n    'bsonRegExp',\n    'serializeFunctions',\n    'ignoreUndefined'\n]);\n/** @internal */\nclass CreateCollectionOperation extends command_1.CommandOperation {\n    constructor(db, name, options = {}) {\n        super(db, options);\n        this.options = options;\n        this.db = db;\n        this.name = name;\n    }\n    execute(server, session, callback) {\n        const db = this.db;\n        const name = this.name;\n        const options = this.options;\n        const done = err => {\n            if (err) {\n                return callback(err);\n            }\n            callback(undefined, new collection_1.Collection(db, name, options));\n        };\n        const cmd = { create: name };\n        for (const n in options) {\n            if (options[n] != null &&\n                typeof options[n] !== 'function' &&\n                !ILLEGAL_COMMAND_FIELDS.has(n)) {\n                cmd[n] = options[n];\n            }\n        }\n        // otherwise just execute the command\n        super.executeCommand(server, session, cmd, done);\n    }\n}\nexports.CreateCollectionOperation = CreateCollectionOperation;\noperation_1.defineAspects(CreateCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,yBAAR,GAAoC,KAAK,CAAzC;;AACA,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,aAAD,CAA3B;;AACA,MAAME,YAAY,GAAGF,OAAO,CAAC,eAAD,CAA5B;;AACA,MAAMG,sBAAsB,GAAG,IAAIC,GAAJ,CAAQ,CACnC,GADmC,EAEnC,UAFmC,EAGnC,GAHmC,EAInC,OAJmC,EAKnC,aALmC,EAMnC,WANmC,EAOnC,KAPmC,EAQnC,gBARmC,EASnC,SATmC,EAUnC,aAVmC,EAWnC,cAXmC,EAYnC,KAZmC,EAanC,aAbmC,EAcnC,cAdmC,EAenC,eAfmC,EAgBnC,gBAhBmC,EAiBnC,YAjBmC,EAkBnC,oBAlBmC,EAmBnC,iBAnBmC,CAAR,CAA/B;AAqBA;;AACA,MAAMN,yBAAN,SAAwCC,SAAS,CAACM,gBAAlD,CAAmE;EAC/DC,WAAW,CAACC,EAAD,EAAKC,IAAL,EAAWC,OAAO,GAAG,EAArB,EAAyB;IAChC,MAAMF,EAAN,EAAUE,OAAV;IACA,KAAKA,OAAL,GAAeA,OAAf;IACA,KAAKF,EAAL,GAAUA,EAAV;IACA,KAAKC,IAAL,GAAYA,IAAZ;EACH;;EACDE,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,EAA4B;IAC/B,MAAMN,EAAE,GAAG,KAAKA,EAAhB;IACA,MAAMC,IAAI,GAAG,KAAKA,IAAlB;IACA,MAAMC,OAAO,GAAG,KAAKA,OAArB;;IACA,MAAMK,IAAI,GAAGC,GAAG,IAAI;MAChB,IAAIA,GAAJ,EAAS;QACL,OAAOF,QAAQ,CAACE,GAAD,CAAf;MACH;;MACDF,QAAQ,CAACG,SAAD,EAAY,IAAId,YAAY,CAACe,UAAjB,CAA4BV,EAA5B,EAAgCC,IAAhC,EAAsCC,OAAtC,CAAZ,CAAR;IACH,CALD;;IAMA,MAAMS,GAAG,GAAG;MAAEC,MAAM,EAAEX;IAAV,CAAZ;;IACA,KAAK,MAAMY,CAAX,IAAgBX,OAAhB,EAAyB;MACrB,IAAIA,OAAO,CAACW,CAAD,CAAP,IAAc,IAAd,IACA,OAAOX,OAAO,CAACW,CAAD,CAAd,KAAsB,UADtB,IAEA,CAACjB,sBAAsB,CAACkB,GAAvB,CAA2BD,CAA3B,CAFL,EAEoC;QAChCF,GAAG,CAACE,CAAD,CAAH,GAASX,OAAO,CAACW,CAAD,CAAhB;MACH;IACJ,CAjB8B,CAkB/B;;;IACA,MAAME,cAAN,CAAqBX,MAArB,EAA6BC,OAA7B,EAAsCM,GAAtC,EAA2CJ,IAA3C;EACH;;AA3B8D;;AA6BnElB,OAAO,CAACE,yBAAR,GAAoCA,yBAApC;AACAG,WAAW,CAACsB,aAAZ,CAA0BzB,yBAA1B,EAAqD,CAACG,WAAW,CAACuB,MAAZ,CAAmBC,eAApB,CAArD"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BulkWriteOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n/** @internal */\n\n\nclass BulkWriteOperation extends operation_1.AbstractOperation {\n  constructor(collection, operations, options) {\n    super(options);\n    this.options = options;\n    this.collection = collection;\n    this.operations = operations;\n  }\n\n  execute(server, session, callback) {\n    const coll = this.collection;\n    const operations = this.operations;\n    const options = { ...this.options,\n      ...this.bsonOptions,\n      readPreference: this.readPreference\n    }; // Create the bulk operation\n\n    const bulk = options.ordered === false ? coll.initializeUnorderedBulkOp(options) : coll.initializeOrderedBulkOp(options); // for each op go through and add to the bulk\n\n    try {\n      for (let i = 0; i < operations.length; i++) {\n        bulk.raw(operations[i]);\n      }\n    } catch (err) {\n      return callback(err);\n    } // Execute the bulk\n\n\n    bulk.execute({ ...options,\n      session\n    }, (err, r) => {\n      // We have connection level error\n      if (!r && err) {\n        return callback(err);\n      } // Return the results\n\n\n      callback(undefined, r);\n    });\n  }\n\n}\n\nexports.BulkWriteOperation = BulkWriteOperation;\noperation_1.defineAspects(BulkWriteOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"names":["Object","defineProperty","exports","value","BulkWriteOperation","operation_1","require","AbstractOperation","constructor","collection","operations","options","execute","server","session","callback","coll","bsonOptions","readPreference","bulk","ordered","initializeUnorderedBulkOp","initializeOrderedBulkOp","i","length","raw","err","r","undefined","defineAspects","Aspect","WRITE_OPERATION"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/operations/bulk_write.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BulkWriteOperation = void 0;\nconst operation_1 = require(\"./operation\");\n/** @internal */\nclass BulkWriteOperation extends operation_1.AbstractOperation {\n    constructor(collection, operations, options) {\n        super(options);\n        this.options = options;\n        this.collection = collection;\n        this.operations = operations;\n    }\n    execute(server, session, callback) {\n        const coll = this.collection;\n        const operations = this.operations;\n        const options = { ...this.options, ...this.bsonOptions, readPreference: this.readPreference };\n        // Create the bulk operation\n        const bulk = options.ordered === false\n            ? coll.initializeUnorderedBulkOp(options)\n            : coll.initializeOrderedBulkOp(options);\n        // for each op go through and add to the bulk\n        try {\n            for (let i = 0; i < operations.length; i++) {\n                bulk.raw(operations[i]);\n            }\n        }\n        catch (err) {\n            return callback(err);\n        }\n        // Execute the bulk\n        bulk.execute({ ...options, session }, (err, r) => {\n            // We have connection level error\n            if (!r && err) {\n                return callback(err);\n            }\n            // Return the results\n            callback(undefined, r);\n        });\n    }\n}\nexports.BulkWriteOperation = BulkWriteOperation;\noperation_1.defineAspects(BulkWriteOperation, [operation_1.Aspect.WRITE_OPERATION]);\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,kBAAR,GAA6B,KAAK,CAAlC;;AACA,MAAMC,WAAW,GAAGC,OAAO,CAAC,aAAD,CAA3B;AACA;;;AACA,MAAMF,kBAAN,SAAiCC,WAAW,CAACE,iBAA7C,CAA+D;EAC3DC,WAAW,CAACC,UAAD,EAAaC,UAAb,EAAyBC,OAAzB,EAAkC;IACzC,MAAMA,OAAN;IACA,KAAKA,OAAL,GAAeA,OAAf;IACA,KAAKF,UAAL,GAAkBA,UAAlB;IACA,KAAKC,UAAL,GAAkBA,UAAlB;EACH;;EACDE,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,EAA4B;IAC/B,MAAMC,IAAI,GAAG,KAAKP,UAAlB;IACA,MAAMC,UAAU,GAAG,KAAKA,UAAxB;IACA,MAAMC,OAAO,GAAG,EAAE,GAAG,KAAKA,OAAV;MAAmB,GAAG,KAAKM,WAA3B;MAAwCC,cAAc,EAAE,KAAKA;IAA7D,CAAhB,CAH+B,CAI/B;;IACA,MAAMC,IAAI,GAAGR,OAAO,CAACS,OAAR,KAAoB,KAApB,GACPJ,IAAI,CAACK,yBAAL,CAA+BV,OAA/B,CADO,GAEPK,IAAI,CAACM,uBAAL,CAA6BX,OAA7B,CAFN,CAL+B,CAQ/B;;IACA,IAAI;MACA,KAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,UAAU,CAACc,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;QACxCJ,IAAI,CAACM,GAAL,CAASf,UAAU,CAACa,CAAD,CAAnB;MACH;IACJ,CAJD,CAKA,OAAOG,GAAP,EAAY;MACR,OAAOX,QAAQ,CAACW,GAAD,CAAf;IACH,CAhB8B,CAiB/B;;;IACAP,IAAI,CAACP,OAAL,CAAa,EAAE,GAAGD,OAAL;MAAcG;IAAd,CAAb,EAAsC,CAACY,GAAD,EAAMC,CAAN,KAAY;MAC9C;MACA,IAAI,CAACA,CAAD,IAAMD,GAAV,EAAe;QACX,OAAOX,QAAQ,CAACW,GAAD,CAAf;MACH,CAJ6C,CAK9C;;;MACAX,QAAQ,CAACa,SAAD,EAAYD,CAAZ,CAAR;IACH,CAPD;EAQH;;AAjC0D;;AAmC/DzB,OAAO,CAACE,kBAAR,GAA6BA,kBAA7B;AACAC,WAAW,CAACwB,aAAZ,CAA0BzB,kBAA1B,EAA8C,CAACC,WAAW,CAACyB,MAAZ,CAAmBC,eAApB,CAA9C"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConnectionPoolMetrics = void 0;\n/** @internal */\n\nclass ConnectionPoolMetrics {\n  constructor() {\n    this.txnConnections = 0;\n    this.cursorConnections = 0;\n    this.otherConnections = 0;\n  }\n  /**\n   * Mark a connection as pinned for a specific operation.\n   */\n\n\n  markPinned(pinType) {\n    if (pinType === ConnectionPoolMetrics.TXN) {\n      this.txnConnections += 1;\n    } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n      this.cursorConnections += 1;\n    } else {\n      this.otherConnections += 1;\n    }\n  }\n  /**\n   * Unmark a connection as pinned for an operation.\n   */\n\n\n  markUnpinned(pinType) {\n    if (pinType === ConnectionPoolMetrics.TXN) {\n      this.txnConnections -= 1;\n    } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n      this.cursorConnections -= 1;\n    } else {\n      this.otherConnections -= 1;\n    }\n  }\n  /**\n   * Return information about the cmap metrics as a string.\n   */\n\n\n  info(maxPoolSize) {\n    return 'Timed out while checking out a connection from connection pool: ' + `maxPoolSize: ${maxPoolSize}, ` + `connections in use by cursors: ${this.cursorConnections}, ` + `connections in use by transactions: ${this.txnConnections}, ` + `connections in use by other operations: ${this.otherConnections}`;\n  }\n  /**\n   * Reset the metrics to the initial values.\n   */\n\n\n  reset() {\n    this.txnConnections = 0;\n    this.cursorConnections = 0;\n    this.otherConnections = 0;\n  }\n\n}\n\nexports.ConnectionPoolMetrics = ConnectionPoolMetrics;\nConnectionPoolMetrics.TXN = 'txn';\nConnectionPoolMetrics.CURSOR = 'cursor';\nConnectionPoolMetrics.OTHER = 'other';","map":{"version":3,"names":["Object","defineProperty","exports","value","ConnectionPoolMetrics","constructor","txnConnections","cursorConnections","otherConnections","markPinned","pinType","TXN","CURSOR","markUnpinned","info","maxPoolSize","reset","OTHER"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/cmap/metrics.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionPoolMetrics = void 0;\n/** @internal */\nclass ConnectionPoolMetrics {\n    constructor() {\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n    /**\n     * Mark a connection as pinned for a specific operation.\n     */\n    markPinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections += 1;\n        }\n        else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections += 1;\n        }\n        else {\n            this.otherConnections += 1;\n        }\n    }\n    /**\n     * Unmark a connection as pinned for an operation.\n     */\n    markUnpinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections -= 1;\n        }\n        else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections -= 1;\n        }\n        else {\n            this.otherConnections -= 1;\n        }\n    }\n    /**\n     * Return information about the cmap metrics as a string.\n     */\n    info(maxPoolSize) {\n        return ('Timed out while checking out a connection from connection pool: ' +\n            `maxPoolSize: ${maxPoolSize}, ` +\n            `connections in use by cursors: ${this.cursorConnections}, ` +\n            `connections in use by transactions: ${this.txnConnections}, ` +\n            `connections in use by other operations: ${this.otherConnections}`);\n    }\n    /**\n     * Reset the metrics to the initial values.\n     */\n    reset() {\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n}\nexports.ConnectionPoolMetrics = ConnectionPoolMetrics;\nConnectionPoolMetrics.TXN = 'txn';\nConnectionPoolMetrics.CURSOR = 'cursor';\nConnectionPoolMetrics.OTHER = 'other';\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,qBAAR,GAAgC,KAAK,CAArC;AACA;;AACA,MAAMA,qBAAN,CAA4B;EACxBC,WAAW,GAAG;IACV,KAAKC,cAAL,GAAsB,CAAtB;IACA,KAAKC,iBAAL,GAAyB,CAAzB;IACA,KAAKC,gBAAL,GAAwB,CAAxB;EACH;EACD;AACJ;AACA;;;EACIC,UAAU,CAACC,OAAD,EAAU;IAChB,IAAIA,OAAO,KAAKN,qBAAqB,CAACO,GAAtC,EAA2C;MACvC,KAAKL,cAAL,IAAuB,CAAvB;IACH,CAFD,MAGK,IAAII,OAAO,KAAKN,qBAAqB,CAACQ,MAAtC,EAA8C;MAC/C,KAAKL,iBAAL,IAA0B,CAA1B;IACH,CAFI,MAGA;MACD,KAAKC,gBAAL,IAAyB,CAAzB;IACH;EACJ;EACD;AACJ;AACA;;;EACIK,YAAY,CAACH,OAAD,EAAU;IAClB,IAAIA,OAAO,KAAKN,qBAAqB,CAACO,GAAtC,EAA2C;MACvC,KAAKL,cAAL,IAAuB,CAAvB;IACH,CAFD,MAGK,IAAII,OAAO,KAAKN,qBAAqB,CAACQ,MAAtC,EAA8C;MAC/C,KAAKL,iBAAL,IAA0B,CAA1B;IACH,CAFI,MAGA;MACD,KAAKC,gBAAL,IAAyB,CAAzB;IACH;EACJ;EACD;AACJ;AACA;;;EACIM,IAAI,CAACC,WAAD,EAAc;IACd,OAAQ,qEACH,gBAAeA,WAAY,IADxB,GAEH,kCAAiC,KAAKR,iBAAkB,IAFrD,GAGH,uCAAsC,KAAKD,cAAe,IAHvD,GAIH,2CAA0C,KAAKE,gBAAiB,EAJrE;EAKH;EACD;AACJ;AACA;;;EACIQ,KAAK,GAAG;IACJ,KAAKV,cAAL,GAAsB,CAAtB;IACA,KAAKC,iBAAL,GAAyB,CAAzB;IACA,KAAKC,gBAAL,GAAwB,CAAxB;EACH;;AAnDuB;;AAqD5BN,OAAO,CAACE,qBAAR,GAAgCA,qBAAhC;AACAA,qBAAqB,CAACO,GAAtB,GAA4B,KAA5B;AACAP,qBAAqB,CAACQ,MAAtB,GAA+B,QAA/B;AACAR,qBAAqB,CAACa,KAAtB,GAA8B,OAA9B"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollectionsOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n\nconst collection_1 = require(\"../collection\");\n/** @internal */\n\n\nclass CollectionsOperation extends operation_1.AbstractOperation {\n  constructor(db, options) {\n    super(options);\n    this.options = options;\n    this.db = db;\n  }\n\n  execute(server, session, callback) {\n    const db = this.db; // Let's get the collection names\n\n    db.listCollections({}, { ...this.options,\n      nameOnly: true,\n      readPreference: this.readPreference,\n      session\n    }).toArray((err, documents) => {\n      if (err || !documents) return callback(err); // Filter collections removing any illegal ones\n\n      documents = documents.filter(doc => doc.name.indexOf('$') === -1); // Return the collection objects\n\n      callback(undefined, documents.map(d => {\n        return new collection_1.Collection(db, d.name, db.s.options);\n      }));\n    });\n  }\n\n}\n\nexports.CollectionsOperation = CollectionsOperation;","map":{"version":3,"names":["Object","defineProperty","exports","value","CollectionsOperation","operation_1","require","collection_1","AbstractOperation","constructor","db","options","execute","server","session","callback","listCollections","nameOnly","readPreference","toArray","err","documents","filter","doc","name","indexOf","undefined","map","d","Collection","s"],"sources":["/Users/yoannesfigueiras/node_modules/mongodb/lib/operations/collections.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollectionsOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst collection_1 = require(\"../collection\");\n/** @internal */\nclass CollectionsOperation extends operation_1.AbstractOperation {\n    constructor(db, options) {\n        super(options);\n        this.options = options;\n        this.db = db;\n    }\n    execute(server, session, callback) {\n        const db = this.db;\n        // Let's get the collection names\n        db.listCollections({}, { ...this.options, nameOnly: true, readPreference: this.readPreference, session }).toArray((err, documents) => {\n            if (err || !documents)\n                return callback(err);\n            // Filter collections removing any illegal ones\n            documents = documents.filter(doc => doc.name.indexOf('$') === -1);\n            // Return the collection objects\n            callback(undefined, documents.map(d => {\n                return new collection_1.Collection(db, d.name, db.s.options);\n            }));\n        });\n    }\n}\nexports.CollectionsOperation = CollectionsOperation;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,oBAAR,GAA+B,KAAK,CAApC;;AACA,MAAMC,WAAW,GAAGC,OAAO,CAAC,aAAD,CAA3B;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA5B;AACA;;;AACA,MAAMF,oBAAN,SAAmCC,WAAW,CAACG,iBAA/C,CAAiE;EAC7DC,WAAW,CAACC,EAAD,EAAKC,OAAL,EAAc;IACrB,MAAMA,OAAN;IACA,KAAKA,OAAL,GAAeA,OAAf;IACA,KAAKD,EAAL,GAAUA,EAAV;EACH;;EACDE,OAAO,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,EAA4B;IAC/B,MAAML,EAAE,GAAG,KAAKA,EAAhB,CAD+B,CAE/B;;IACAA,EAAE,CAACM,eAAH,CAAmB,EAAnB,EAAuB,EAAE,GAAG,KAAKL,OAAV;MAAmBM,QAAQ,EAAE,IAA7B;MAAmCC,cAAc,EAAE,KAAKA,cAAxD;MAAwEJ;IAAxE,CAAvB,EAA0GK,OAA1G,CAAkH,CAACC,GAAD,EAAMC,SAAN,KAAoB;MAClI,IAAID,GAAG,IAAI,CAACC,SAAZ,EACI,OAAON,QAAQ,CAACK,GAAD,CAAf,CAF8H,CAGlI;;MACAC,SAAS,GAAGA,SAAS,CAACC,MAAV,CAAiBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,GAAjB,MAA0B,CAAC,CAAnD,CAAZ,CAJkI,CAKlI;;MACAV,QAAQ,CAACW,SAAD,EAAYL,SAAS,CAACM,GAAV,CAAcC,CAAC,IAAI;QACnC,OAAO,IAAIrB,YAAY,CAACsB,UAAjB,CAA4BnB,EAA5B,EAAgCkB,CAAC,CAACJ,IAAlC,EAAwCd,EAAE,CAACoB,CAAH,CAAKnB,OAA7C,CAAP;MACH,CAFmB,CAAZ,CAAR;IAGH,CATD;EAUH;;AAnB4D;;AAqBjET,OAAO,CAACE,oBAAR,GAA+BA,oBAA/B"},"metadata":{},"sourceType":"script"}